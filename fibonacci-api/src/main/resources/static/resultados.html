<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Resultados de Fibonacci</title>
</head>
<body>
<h1>Resultados de Fibonaccis</h1>
<table id="tabla" border="1">
    <thead>
    <tr>
        <th>ID</th>
        <th>A</th>
        <th>B</th>
        <th>Cantidad</th>
        <th>Secuencia</th>
        <th>Email</th>
        <th>Fecha Env√≠o</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
    fetch('/api/resultados-json')
      .then(resp => {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.json();
      })
      .then(data => {
        const tbody = document.querySelector('#tabla tbody');
        data.forEach(item => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${item.id}</td>
            <td>${item.a}</td>
            <td>${item.b}</td>
            <td>${item.cantidad}</td>
            <td>${item.resultado}</td>
            <td>${item.email}</td>
            <td>${new Date(item.fechaEnvio).toLocaleString()}</td>
          `;
          tbody.appendChild(tr);
        });
      })
      .catch(err => {
        console.error('Error al cargar resultados:', err);
        const msg = document.createElement('p');
        msg.style.color = 'red';
        msg.textContent = 'No se pudo cargar los datos: ' + err;
        document.body.appendChild(msg);
      });
</script>
</body>
</html>
